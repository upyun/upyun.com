<style lang="sass">
  #summit
    position: absolute
    bottom: 0
    left: 50%
    margin-left: -691px
</style>

<template>
  <svg id="summit" width="1383px" height="393px" viewbox="0 0 1383 393" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
      <linearGradient id="linearGradient-1">
        <stop stop-color="#FFFFFF" stop-opacity="0.7" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-2" x1="0%" y1="101.795629%" x2="100%" y2="1.89641292%">
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-3" x1="0%" y1="103.460526%" x2="100%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-4" x1="3.43681469%" y1="100.892032%" x2="99.7024268%" y2="0.758673555%">
        <stop stop-color="#FFFFFF" stop-opacity="0.7" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-5" x1="0%" y1="0%" x2="100%" y2="100.564538%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.7" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-6" x1="0%" y1="0%" x2="100%" y2="103.460521%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-7" x1="0%" y1="0%" x2="100%" y2="103.460521%">
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-8" x1="0%" y1="100%" x2="97.1377255%" y2="4.18128412%">
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-9" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-10" x1="100%" y1="100%" x2="2.22663284%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.19" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-11" x1="98.4461363%" y1="106.502757%" x2="-3.05723852%" y2="2.61804917%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-12" x1="4.72138074%" y1="103.223653%" x2="100%" y2="1.47879464%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-13" x1="0%" y1="102.849379%" x2="103.185608%" y2="2.4370797%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-14" x1="0%" y1="106.008342%" x2="97.3772347%" y2="10.7951536%">
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-15" x1="0%" y1="2.12987956%" x2="96.8004015%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-16" x1="100%" y1="0%" x2="0%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-17" x1="97.3447679%" y1="97.4318221%" x2="-2.23595156%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.251047328" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.7" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-18" x1="100.606047%" y1="0.427055118%" x2="1.45484593%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-19" x1="0%" y1="0%" x2="100%" y2="103.460521%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-20" x1="97.3447679%" y1="97.4318221%" x2="-2.23595156%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.251047328" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-21" x1="0%" y1="0%" x2="100%" y2="103.460521%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-22" x1="100.606047%" y1="0.427055118%" x2="1.45484593%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.186282835" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-23" x1="100%" y1="1.9744873%" x2="3.49036907%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-24" x1="100%" y1="100%" x2="-1.99962798%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-25" x1="0%" y1="102.814899%" x2="100%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-26" x1="0%" y1="100%" x2="100%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-27" x1="98.4575416%" y1="317.480469%" x2="0%" y2="317.480469%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-28" x1="100%" y1="100%" x2="-4.61519269%" y2="-9.35640604%">
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-29" x1="97.3772321%" y1="103.372897%" x2="-4.77120536%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-30" x1="100%" y1="0%" x2="0%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.186282835" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-31" x1="0%" y1="0%" x2="100%" y2="103.460521%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-32" x1="0%" y1="100%" x2="100%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-33" x1="0%" y1="100%" x2="100%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-34" x1="0%" y1="100%" x2="98.6567283%" y2="1.34327168%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-35" x1="100%" y1="100%" x2="0%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.25" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.4" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-36" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-37" x1="100%" y1="100%" x2="-1.99962798%" y2="0%">
        <stop stop-color="#FFFFFF" stop-opacity="0.6" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-38" x1="0%" y1="0%" x2="100%" y2="103.460521%">
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-39" x1="0%" y1="0%" x2="99.318112%" y2="100%">
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-40" x1="0%" y1="0%" x2="98.4354436%" y2="98.5528385%">
        <stop stop-color="#FFFFFF" stop-opacity="0.9" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.7" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-41" x1="0%" y1="0%" x2="99.2984694%" y2="99.3130846%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-42" x1="100%" y1="11.0868566%" x2="0%" y2="113.120404%">
        <stop stop-color="#FFFFFF" stop-opacity="0.8" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-43" x1="93.3012463%" y1="103.845585%" x2="-3.60398065%" y2="5.34446023%">
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
      </linearGradient>
      <linearGradient id="linearGradient-44" x1="4.75410279%" y1="100%" x2="100%" y2="5.35308975%">
        <stop stop-color="#FFFFFF" stop-opacity="0.2" offset="0%"/>
        <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
      </linearGradient>
    </defs>
    <g id="summit_items" ref="summit_items" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
      <path id="line_17_21" d="M1041.69116,324.393555 L1114.15967,295.903076" stroke="url(#linearGradient-1)"/>
      <path id="line_20_23" d="M1117.68225,265.877441 L1207.13647,186.10376" stroke="url(#linearGradient-2)"/>
      <path id="line_19_23" d="M1107.48016,222.379028 L1206.17542,184.514343" stroke="url(#linearGradient-3)"/>
      <path id="line_17_19" d="M1040.34357,322.552368 L1096.88702,230.648254" stroke="url(#linearGradient-4)"/>
      <path id="line_16_17" d="M984.512939,266.08252 L1036.00952,322.955811" stroke="url(#linearGradient-5)"/>
      <path id="line_23_24" d="M1211.38379,186.464844 L1246.44434,235.666992" stroke="url(#linearGradient-6)"/>
      <path id="line_15_19" d="M931.638306,311.990356 L1095.19928,228.771851" stroke="url(#linearGradient-7)"/>
      <path id="line_2_4" d="M164.635742,368.059082 L249.571289,327.585449" stroke="url(#linearGradient-8)"/>
      <path id="line_11_14" d="M702.190918,289.710449 L921.371094,378.388672" stroke="url(#linearGradient-9)"/>
      <path id="line_10_0" d="M668,345 L742.295898,387.09082" stroke="url(#linearGradient-10)"/>
      <path id="line_9_10" d="M513.225586,274.075195 L660,341" stroke="url(#linearGradient-11)"/>
      <path id="line_9_8" d="M505.471191,276.098633 L456.360352,373.559082" stroke="url(#linearGradient-12)"/>
      <path id="line_7_9" d="M427.374023,321.581055 L503.427734,274.45752" stroke="url(#linearGradient-13)"/>
      <path id="line_5_6" d="M305.282715,367.263184 L385.889648,309.138672" stroke="url(#linearGradient-14)"/>
      <path id="line_3_4" d="M180.586426,279.584961 L249.322266,322.638672" stroke="url(#linearGradient-15)"/>
      <path id="line_13_12" d="M891.60791,221.543457 L820.865356,333.441895" stroke="url(#linearGradient-16)"/>
      <path id="line_25_0" d="M1279,375 L1381.65273,387.595312" stroke="url(#linearGradient-17)"/>
      <path id="line_15_14" d="M928.262207,316.845215 L923.604492,375.030273" stroke="url(#linearGradient-18)"/>
      <path id="line_16_22" d="M985.829224,263.951294 L1143.63525,334.385254" stroke="url(#linearGradient-19)"/>
      <path id="line_26_0" d="M1320,325 L1381.58242,387.795313" stroke="url(#linearGradient-20)"/>
      <path id="line_23_27" d="M1213.03174,184.322266 L1358.94922,235.291016" stroke="url(#linearGradient-21)"/>
      <path id="line_16_15" d="M979.247559,265.821228 L930.805908,310.955688" stroke="url(#linearGradient-22)"/>
      <path id="line_11_8" d="M693.315674,288.769531 L458.631592,376.249268" stroke="url(#linearGradient-23)"/>
      <path id="line_24_27" d="M1252,238 L1359,237" stroke="url(#linearGradient-24)"/>
      <path id="line_27_26" d="M1361.49268,241.412109 L1319.09277,318.632812" stroke="url(#linearGradient-25)"/>
      <path id="line_26_22" d="M1311.94873,323.150391 L1152.66113,336.910645" stroke="url(#linearGradient-26)"/>
      <path id="line_7_4" d="M417.893555,324.674316 L258.958008,324.825562" stroke="url(#linearGradient-27)"/>
      <path id="line_4_5" d="M257.603271,328.486572 L297.145508,366.584961" stroke="url(#linearGradient-28)"/>
      <path id="line_6_8" d="M393.299072,309.609863 L450.296875,374.735352" stroke="url(#linearGradient-29)"/>
      <path id="line_10_11" d="M666.862793,338.708496 L695.260742,291.075684" stroke="url(#linearGradient-23)"/>
      <path id="line_12_0" d="M817.839844,337.286255 L742,387.053711" stroke="url(#linearGradient-30)"/>
      <path id="line_13_19" d="M899.931885,218.199951 L1094,225" stroke="url(#linearGradient-31)"/>
      <path id="line_22_0" d="M1145.59473,341 L1119,386.077881" stroke="url(#linearGradient-32)"/>
      <path id="line_14_22" d="M925.748535,378.026367 L1143.25537,338.751465" stroke="url(#linearGradient-33)"/>
      <path id="line_24_22" d="M1246.117,240.662109 L1151.86401,333.775879" stroke="url(#linearGradient-34)"/>
      <path id="line_27_0" d="M1365.40527,241.892578 L1381.25391,387.455078" stroke="url(#linearGradient-35)"/>
      <path id="line_11_15" d="M703,287 L925.042236,313.229248" stroke="url(#linearGradient-36)"/>
      <path id="line_24_26" d="M1250.45514,240.576965 L1313.36572,318.825684" stroke="url(#linearGradient-37)"/>
      <path id="line_18_20" d="M1038.94141,247.39624 L1114.10498,266.796753" stroke="url(#linearGradient-38)"/>
      <path id="line_18_21" d="M1038.70599,247.966614 L1114.43066,293.925781" stroke="url(#linearGradient-39)"/>
      <path id="line_19_25" d="M1106.22607,229.712891 L1274.51318,373.118164" stroke="url(#linearGradient-40)"/>
      <path id="line_13_15" d="M897.009766,222.470947 L927.176921,310.286296" stroke="url(#linearGradient-41)"/>
      <path id="line_3_1" d="M172,279 L117.699219,295.959229" stroke="url(#linearGradient-42)"/>
      <path id="line_1_2" d="M115.831055,302.16626 L156.865723,366.14209" stroke="url(#linearGradient-43)"/>
      <path id="line_1_0" d="M109.005859,300.844238 L0,385" stroke="url(#linearGradient-44)"/>
      <circle id="circle_27" fill-opacity="0.4" fill="#FFFFFF" cx="1364" cy="237" r="5"/>
      <circle id="circle_26" fill-opacity="0.6" fill="#FFFFFF" cx="1316.5" cy="322.5" r="4.5"/>
      <circle id="circle_25" fill-opacity="0.7" fill="#FFFFFF" cx="1276.5" cy="374.5" r="2.5"/>
      <circle id="circle_24" fill-opacity="0.9" fill="#FFFFFF" cx="1248.24045" cy="238.24045" r="3.24045013"/>
      <circle id="circle_23" fill-opacity="0.6" fill="#FFFFFF" cx="1209.5" cy="183.5" r="3.5"/>
      <circle id="circle_22" fill-opacity="0.8" fill="#FFFFFF" cx="1148" cy="337" r="5"/>
      <circle id="circle_21" fill-opacity="0.5" fill="#FFFFFF" cx="1116" cy="295" r="2"/>
      <circle id="circle_20" fill-opacity="0.3" fill="#FFFFFF" cx="1116" cy="267" r="2"/>
      <circle id="circle_19" fill-opacity="0.9" fill="#FFFFFF" cx="1101" cy="225" r="7"/>
      <circle id="circle_18" fill-opacity="0.2" fill="#FFFFFF" cx="1037" cy="247" r="2"/>
      <circle id="circle_17" fill-opacity="0.7" fill="#FFFFFF" cx="1038.5" cy="325.5" r="3.5"/>
      <circle id="circle_16" fill-opacity="0.4" fill="#FFFFFF" cx="982" cy="263" r="4"/>
      <circle id="circle_15" fill-opacity="0.2" fill="#FFFFFF" cx="928.5" cy="313.5" r="3.5"/>
      <circle id="circle_14" fill-opacity="0.9" fill="#FFFFFF" cx="922.930339" cy="377.930339" r="3.93033854"/>
      <circle id="circle_13" fill-opacity="0.8" fill="#FFFFFF" cx="895" cy="218" r="5"/>
      <circle id="circle_12" fill-opacity="0.4" fill="#FFFFFF" cx="819.5" cy="335.5" r="2.5"/>
      <circle id="circle_11" fill-opacity="0.6" fill="#FFFFFF" cx="698" cy="287" r="5"/>
      <circle id="circle_10" fill-opacity="0.8" fill="#FFFFFF" cx="664" cy="343" r="5"/>
      <circle id="circle_9" fill-opacity="0.6" fill="#FFFFFF" cx="508" cy="272" r="5"/>
      <circle id="circle_8" fill-opacity="0.8" fill="#FFFFFF" cx="454" cy="378" r="5"/>
      <circle id="circle_7" fill-opacity="0.4" fill="#FFFFFF" cx="423" cy="324" r="5"/>
      <circle id="circle_6" fill-opacity="0.9" fill="#FFFFFF" cx="390" cy="306" r="5"/>
      <circle id="circle_5" fill-opacity="0.5" fill="#FFFFFF" cx="301" cy="370" r="5"/>
      <circle id="circle_4" fill-opacity="0.6" fill="#FFFFFF" cx="254" cy="325" r="5"/>
      <circle id="circle_3" fill-opacity="0.8" fill="#FFFFFF" cx="176" cy="277" r="5"/>
      <circle id="circle_2" fill-opacity="0.3" fill="#FFFFFF" cx="160" cy="370" r="5"/>
      <circle id="circle_1" fill-opacity="0.5" fill="#FFFFFF" cx="113" cy="298" r="5"/>
    </g>
  </svg>
</template>

<script>
import animate from 'animateplus'

export default {
  props: ['animate'],
  data () {
    return {
      timeout: {}
    }
  },
  mounted () {
    var EASING_METHOD = 'easeInOutCubic'
    var DURATION_MIN = 2000
    var DURATION_MAX = 4000
    var RANDOM_RANGE = 20
    var MAXIMUM_TIMES = 10
    var vm = this
    var count = 0

    function getLinePosition (el) {
      if (animationCollection[el.id]) return animationCollection[el.id]
      var path = el.getAttribute('data-d') || el.getAttribute('d')
      el.setAttribute('data-d', path)
      path = path.split(' ')
      var start = path[0].replace('M', '').split(',').map(function (n) { return Number(n) })
      var end = path[1].replace('L', '').split(',').map(function (n) { return Number(n) })
      return {
        start: start,
        end: end
      }
    }
    function getPathString (position) {
      return 'M' + position.start.join(',') + ' L' + position.end.join(',')
    }
    function moveLine (el, x, y, point) {
      var position = getLinePosition(el)
      point = position[point || 'start']
      point[0] += x
      point[1] += y
      animationCollection[el.id] = position
    }
    function moveCircle (el, x, y) {
      animationCollection[el.id] = { x: x, y: y }
    }
    function moveSet (set, x, y) {
      set.forEach(function (item) {
        var el = document.getElementById(item.id)
        item.id.indexOf('line') === 0 ? moveLine(el, x, y, item.point) : moveCircle(el, x, y)
      })
    }

    var sets = []
    var animationCollectionPrev = {}
    var animationCollection = {}

    var circles = this.$refs.summit_items.getElementsByTagName('circle')

    for (var i = 0; circles[i]; i++) {
      var set = []
      var num = Number(circles[i].id.replace('circle_', ''))
      set.push({ id: circles[i].id })
      var starts = this.$refs.summit_items.querySelectorAll('path[id^="line_' + num + '_"]')
      for (var t = 0; starts[t]; t++) {
        set.push({ id: starts[t].id, point: 'start' })
      }
      var ends = this.$refs.summit_items.querySelectorAll('path[id$="_' + num + '"]')
      for (var ti = 0; ends[ti]; ti++) {
        set.push({ id: ends[ti].id, point: 'end' })
      }
      sets.push(set)
    }

    function start () {
      var duration = Math.random() * (DURATION_MAX - DURATION_MIN) + DURATION_MAX
      sets.forEach(function (set) {
        var max = RANDOM_RANGE
        var min = -RANDOM_RANGE
        var randomX = Math.random() * (max - min) + min
        var randomY = Math.random() * (max - min) + min
        moveSet(set, randomX, randomY)
      })
      for (var id in animationCollection) {
        if (id.indexOf('line') === 0) {
          let el = document.getElementById(id)
          animate({el, d: [el.getAttribute('d'), getPathString(animationCollection[id])], duration, easing: EASING_METHOD})
        } else {
          let el = document.getElementById(id)
          let x, y
          if (animationCollectionPrev[id]) {
            x = [animationCollectionPrev[id].x, animationCollection[id].x]
            y = [animationCollectionPrev[id].y, animationCollection[id].y]
          } else {
            x = animationCollection[id].x
            y = animationCollection[id].y
          }
          animate({el, translateX: x, translateY: y, duration, easing: EASING_METHOD})
        }
      }
      // transfer collection
      animationCollectionPrev = animationCollection
      animationCollection = {}

      // limit maximum number of times due to performance issue
      count += 1
      if (count >= MAXIMUM_TIMES) return

      // schedule next move
      vm.timeout = setTimeout(function () {
        start()
      }, duration)
    }
    if (this.animate) start(DURATION_MIN)
  },
  beforeDestroy () {
    clearTimeout(this.timeout)
  }
}
</script>
